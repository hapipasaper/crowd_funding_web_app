{% extends "base.html" %}
{% load i18n %}
{% block title %}Password Reset{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="card shadow-lg rounded-4">
      <div class="card-body p-4">
        <h3 class="text-center mb-3">{% trans "Password Reset" %}</h3>

        {% if user.is_authenticated %}
          <div class="alert alert-info">
            {% trans "Note:" %} {% trans "You are already logged in as" %} <b>{{ user.username }}</b>.
          </div>
        {% endif %}

        <p class="text-muted">
          {% trans "Forgotten your password? Enter your email address below, and we'll send you an email allowing you to reset it." %}
        </p>

       <form method="post" class="needs-validation">
  {% csrf_token %}
  <div class="mb-3">
    <label for="{{ form.email.id_for_label }}" class="form-label">{% trans "Email address" %}</label>
    {{ form.email }}
    {% if form.email.errors %}
      <div class="text-danger small">{{ form.email.errors }}</div>
    {% endif %}
  </div>
  <button type="submit" class="btn btn-primary w-100">
    <i class="bi bi-envelope"></i> {% trans "Reset My Password" %}
  </button>
</form>

        <div class="mt-3 text-center">
          <small class="text-muted">
            {% trans "Please contact us if you have any trouble resetting your password." %}
          </small>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Bootstrap 5 form validation style
  (function () {
    'use strict'
    const forms = document.querySelectorAll('.needs-validation')
    Array.from(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
  })()
</script>
{% endblock %}